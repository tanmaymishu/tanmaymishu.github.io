(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[23],{2912:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/articles/2022-07/configure-vite-in-a-laravel-project",function(){return r(10)}])},9954:function(e,t,r){"use strict";var n=r(5893),s=r(1664),i=(r(7294),function(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"mt-4 relative w-full px-6 py-12 bg-white shadow-xl shadow-slate-700/10 ring-1 ring-gray-900/5 md:max-w-3xl md:mx-auto lg:max-w-4xl lg:pt-16 lg:pb-28",children:e.children})})});i.ArticleHeading=function(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("section",{children:[(0,n.jsx)("p",{className:"text-blue-500 text-center hover:underline mt-4",children:(0,n.jsx)(s.default,{href:"/articles",children:"\u2190 All Articles"})}),(0,n.jsx)("p",{className:"font-bold text-3xl text-center",children:e.title}),(0,n.jsx)("p",{className:"text-center text-gray-500 text-sm",children:e.date})]})})},i.ArticleBody=function(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"prose prose-slate mx-auto lg:prose-lg",children:e.children})})},t.Z=i},4260:function(e,t,r){"use strict";var n=r(5893);r(7294);t.Z=function(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("hr",{}),(0,n.jsxs)("p",{className:"mt-8 my-5 text-center text-base text-gray-400",children:["\xa9 ",(new Date).getFullYear()," Tanmay Mishu."]})]})})}},4154:function(e,t,r){"use strict";var n=r(5893),s=r(9008),i=r(7294);t.Z=function(e){var t=(0,i.useState)(""),r=t[0],a=t[1];return(0,i.useEffect)((function(){console.log("here"),a(e.title)}),[e.title]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(s.default,{children:[(0,n.jsx)("title",{children:r}),(0,n.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"}),(0,n.jsx)("meta",{name:"description",content:e.description}),(0,n.jsx)("meta",{property:"og:title",content:e.title},"title"),(0,n.jsx)("meta",{property:"og:description",content:e.description}),(0,n.jsx)("meta",{property:"og:type",content:"website"}),(0,n.jsx)("meta",{property:"og:url",content:e.url}),(0,n.jsx)("meta",{property:"og:image",content:e.image})]})})}},4951:function(e,t,r){"use strict";var n=r(5893),s=r(6727),i=r(5506),a=r(9065),l=r(1664),c=r(1163);t.Z=function(e){var t=(0,c.useRouter)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pJ,{as:"nav",className:"bg-white shadow",children:function(e){var r=e.open;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-2 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"relative flex justify-between h-16",children:[(0,n.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center sm:hidden",children:(0,n.jsxs)(s.pJ.Button,{className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500",children:[(0,n.jsx)("span",{className:"sr-only",children:"Open main menu"}),r?(0,n.jsx)(i.Z,{className:"block h-6 w-6","aria-hidden":"true"}):(0,n.jsx)(a.Z,{className:"block h-6 w-6","aria-hidden":"true"})]})}),(0,n.jsxs)("div",{className:"flex-1 flex items-center justify-center sm:items-stretch sm:justify-start",children:[(0,n.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,n.jsx)("a",{href:"/",children:(0,n.jsx)("h1",{className:"text-2xl text-gray-700 font-bold",children:"<Tanmay />"})})}),(0,n.jsxs)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[(0,n.jsx)(l.default,{href:"/",children:(0,n.jsx)("a",{className:"".concat("/"==t.pathname?"border-blue-500 border-b-2 text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium"),children:"Home"})}),(0,n.jsx)(l.default,{href:"/articles",children:(0,n.jsx)("a",{className:"".concat(t.pathname.startsWith("/articles")?"border-blue-500 border-b-2 text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium"),children:"Articles"})}),(0,n.jsx)("a",{href:"#",className:"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Projects"})]})]})]})}),(0,n.jsx)(s.pJ.Panel,{className:"sm:hidden",children:(0,n.jsxs)("div",{className:"pt-2 pb-4 space-y-1",children:[(0,n.jsx)(s.pJ.Button,{as:"a",href:"#",className:"bg-blue-50 border-blue-500 text-blue-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium",children:"Home"}),(0,n.jsx)(l.default,{href:"/articles",children:(0,n.jsx)(s.pJ.Button,{as:"a",href:"/articles",className:"border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium",children:"Articles"})}),(0,n.jsx)(s.pJ.Button,{as:"a",href:"#",className:"border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium",children:"Projects"})]})})]})}})})}},10:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(5893),s=r(7294),i=r(4951),a=r(3324),l=r(6671),c=r(9954),o=r(4260),d=r(4154),h=function(e){var t=(0,s.useRef)(null);return(0,s.useEffect)((function(){var e,r=document.createElement("script");r.setAttribute("src","https://utteranc.es/client.js"),r.setAttribute("repo","tanmaymishu/tanmaymishu.github.io"),r.setAttribute("issue-term","title"),r.setAttribute("label","comment"),r.setAttribute("theme","github-light"),r.setAttribute("crossorigin","anonymous"),null===(e=t.current)||void 0===e||e.appendChild(r)}),[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{ref:t,className:"mt-4",children:(0,n.jsx)("hr",{})})})},p=function(e){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Z,{title:"How to configure Vite with Inertia, React, and TypeScript in a Laravel Project",description:"Laravel has recently switched from Laravel Mix to Vite. All the projects in the ecosystem will be using Vite from now on. In this article I will discuss how to configure Vite with Inertia, React, TypeScript in a Laravel Project.",url:"/articles/2022-07/configure-vite-in-a-laravel-project"}),(0,n.jsx)(i.Z,{}),(0,n.jsxs)(c.Z,{children:[(0,n.jsxs)(c.Z.ArticleBody,{children:[(0,n.jsx)(c.Z.ArticleHeading,{title:"How to configure Vite with Inertia, React, and TypeScript in a Laravel Project",date:"July 23, 2022"}),(0,n.jsxs)("div",{className:"mt-4 leading-10",children:[(0,n.jsx)("p",{className:"",children:"Laravel has recently switched from Laravel Mix to Vite. All the projects in the ecosystem will be using Vite from now on. In this article I will discuss how to configure Vite with Inertia, React, TypeScript in a Laravel Project."}),(0,n.jsxs)("section",{children:["Create a new Laravel project.",(0,n.jsx)(a.Z,{language:"shell",style:l.bW,children:"composer create-project laravel/laravel laravel-vite-inertia-ts"}),"Next we have to cd into ",(0,n.jsx)("em",{children:"laravel-vite-inertia-ts"})," directory and add the react and inertia dependencies:",(0,n.jsx)(a.Z,{language:"shell",style:l.bW,children:"yarn add react react-dom @inertiajs/inertia @inertiajs/inertia-react"}),"We also have add the typescript dev dependencies:",(0,n.jsx)(a.Z,{language:"shell",style:l.bW,children:"yarn add -D typescript @types/react @types/react-dom"}),"Next, we need to generate a tsconfig.json file.",(0,n.jsx)(a.Z,{language:"shell",style:l.bW,children:"./node_modules/.bin/tsc --init --jsx react"}),"Then we need to rename the ",(0,n.jsx)("em",{children:"/resources/js"})," directory to"," ",(0,n.jsx)("em",{children:"/resources/ts"})," and the ",(0,n.jsx)("em",{children:"app.js"})," file to"," ",(0,n.jsx)("em",{children:"app.tsx"}),". Then in the ",(0,n.jsx)("em",{children:"app.tsx"})," file we have to create the inertia app like the following:",(0,n.jsx)(a.Z,{language:"typescript",style:l.bW,children:'\n    import "./bootstrap";\n    import "../css/app.css";\n    import React from "react";\n    import { createRoot } from "react-dom/client";\n    import { createInertiaApp } from "@inertiajs/inertia-react";\n    import { resolvePageComponent } from "laravel-vite-plugin/inertia-helpers";\n    \n    createInertiaApp({\n        resolve: (name) =>\n            resolvePageComponent(\n                `./Pages/${name}.tsx`,\n                import.meta.glob("./Pages/**/*.tsx")\n            ),\n        setup({ el, App, props }) {\n            createRoot(el).render(<App {...props} />);\n        },\n    });\n    '}),"We will notice that the ",(0,n.jsx)("em",{children:"app.css"})," file has been imported here. This is the recommended way of using CSS with Inertia and Vite. If there is a TypeScript error saying:",(0,n.jsx)("blockquote",{children:"The 'import.meta' meta-property is only allowed when the '--module' option is 'es2020', 'es2022', 'esnext', 'system', 'node16', or 'nodenext'.ts(1343)"}),"...then we need to head over to the ",(0,n.jsx)("code",{children:"tsconfig.json"})," ","file and change both ",(0,n.jsx)("code",{children:"target"})," and ",(0,n.jsx)("code",{children:"module"})," ","option to ",(0,n.jsx)("code",{children:"esnext"})," and also uncomment the"," ",(0,n.jsx)("code",{children:"types"})," property to enable the vite-specific typings. We will also need to set the ",(0,n.jsx)("code",{children:"moduleResoultions"})," ","property to ",(0,n.jsx)("code",{children:"node"}),(0,n.jsx)(a.Z,{language:"json",style:l.bW,children:'\n    // tsconfig.json\n    ...\n    "target": "esnext",\n    "module": "esnext",\n    "moduleResolution": "node",\n    ...\n    "types": ["vite/client"],\n    ...'}),"Laravel ships with a vite config (",(0,n.jsx)("code",{children:"vite.config.js"}),") which is configured for JavaScript. Let's tweak that file a bit to fit our needs. Currently the laravel vite plugin points to the"," ",(0,n.jsx)("code",{children:"app.js"})," file.",(0,n.jsx)(a.Z,{language:"JavaScript",style:l.bW,children:"\n    // vite.config.js\n    laravel({\n      input: [\n          'resources/css/app.css',\n          'resources/js/app.js',\n      ],\n      refresh: true,\n  }),\n                "}),"We need to change it to ",(0,n.jsx)("code",{children:"ts/app.tsx"})," file like this:",(0,n.jsx)(a.Z,{language:"JavaScript",style:l.bW,children:"\n    // vite.config.js\n    laravel(['resources/ts/app.tsx'])\n                "}),"We will turn our attention to the server side of things now. Let's install inertia first:",(0,n.jsx)(a.Z,{language:"shell",style:l.bW,children:"composer require inertiajs/inertia-laravel"}),"Next, we'll add this root template ",(0,n.jsx)("code",{children:"app.blade.php"})," to"," ",(0,n.jsx)("code",{children:"resources/views"})," directory:",(0,n.jsx)(a.Z,{language:"blade",style:l.bW,children:'\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset="utf-8" />\n          <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />\n          @vite(\'resources/ts/app.tsx\')\n          @inertiaHead\n        </head>\n        <body>\n          @inertia\n        </body>\n      </html>\n                '}),"Then we will generate the Inertia middleware:",(0,n.jsx)(a.Z,{language:"shell",style:l.bW,children:"php artisan inertia:middleware"}),"And the generated middleware should be added the ",(0,n.jsx)("em",{children:"web"})," ","middleware group in ",(0,n.jsx)("code",{children:"Kernel.php"}),":",(0,n.jsx)(a.Z,{language:"php",style:l.bW,children:"\n    'web' => [\n        // ...\n        \\App\\Http\\Middleware\\HandleInertiaRequests::class,\n    ],\n              "}),"Time to see it in action. Let's create a TSX react component, called ",(0,n.jsx)("code",{children:"Welcome.tsx"})," in the"," ",(0,n.jsx)("code",{children:"resources/ts/Pages"})," directory:",(0,n.jsx)(a.Z,{language:"tsx",style:l.bW,children:'\n      // resources/ts/Pages/Welcome.tsx\n\n      import React from "react";\n\n      interface WelcomeProps {}\n      \n      const Welcome: React.FC<WelcomeProps> = (props) => {\n          return <>Welcome from TSX</>;\n      };\n      export default Welcome;\n                '}),"Now, let's head over to ",(0,n.jsx)("code",{children:"web.php"})," and return the React view instead of Blade view from the ",(0,n.jsx)("code",{children:"/"})," route:",(0,n.jsx)(a.Z,{language:"php",style:l.bW,children:"\n  // web.php\n\n  <?php\n\n  use Illuminate\\Support\\Facades\\Route;\n  use Inertia\\Inertia;\n\n  Route::get('/', function () {\n    return Inertia::render('Welcome');\n  });\n"}),"Now we need to make sure we are running"," ",(0,n.jsx)("code",{children:"php artisan serve"})," and ",(0,n.jsx)("code",{children:"yarn dev"})," in the terminal. If we visit the `http://localhost:8000`, we should now see the text: ",(0,n.jsx)("strong",{children:"Welcome from TSX."})," Any changes made to the ",(0,n.jsx)("code",{children:"Welcome.tsx"})," file will now be reflected via vite."]})]})]}),(0,n.jsx)(h,{})]}),(0,n.jsx)(o.Z,{})]})}}},function(e){e.O(0,[533,692,774,888,179],(function(){return t=2912,e(e.s=t);var t}));var t=e.O();_N_E=t}]);